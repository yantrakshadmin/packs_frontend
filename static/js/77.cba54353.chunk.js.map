{"version":3,"sources":["../../common/formFields/createCP/basicDetailsCreateCP.formFields.js","forms/CreateCP/basicDetialsCreateCP.form.js"],"names":["basicDetailCreateCPFormFields","key","kwargs","placeholder","type","FORM_ELEMENT_TYPES","SELECT","customLabel","disabled","INPUT","others","min","BasicDetailsCreateCPForm","id","onCancel","scsData","onNext","active","useState","loading","setLoading","useForm","form","dispatch","useDispatch","state","useSelector","e","data","createCPData","submit","a","ADD_CREATE_CP_DATA","handleFieldsChange","useCallback","name","temp","_","find","sks","i","sender","receiver","value","setFieldsValue","volume_pm","peak_volume","yantra_cycle","total_cycle_time","getFieldValue","kit_pm","ceil","kit_usage_ratio","round","kit_based_on_usage_ratio","parseInt","useEffect","STOP_STEP_LOADING","spinning","initialValues","onFinish","layout","onFieldsChange","autoComplete","orientation","style","justifyContent","slice","map","item","idx","span","toString","className","formItem","showSearch","filterOption","input","option","search","toLowerCase","indexOf","selectOptions","new_id","customTitle","justify","htmlType","onClick","ArrowRightOutlined","fontSize"],"mappings":"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","file":"static/js/77.cba54353.chunk.js","sourcesContent":["import {FORM_ELEMENT_TYPES} from 'web/src/constants/formFields.constant';\n\nexport const basicDetailCreateCPFormFields = [\n  {\n    key: 'sender_client',\n    kwargs: {\n      placeholder: 'Sender',\n    },\n    type: FORM_ELEMENT_TYPES.SELECT,\n    customLabel: 'Sender',\n  },\n\n  {\n    key: 'sender_location',\n    kwargs: {\n      placeholder: 'Emitter Location',\n      disabled: true,\n    },\n    type: FORM_ELEMENT_TYPES.INPUT,\n    customLabel: 'Emitter Location',\n  },\n  {\n    key: 'receiver',\n    type: FORM_ELEMENT_TYPES.INPUT,\n    kwargs: {\n      placeholder: 'Receiver',\n      disabled: true,\n    },\n    customLabel: 'Receiver',\n  },\n  {\n    key: 'receiver_location',\n    kwargs: {\n      placeholder: 'Receiver Location',\n      disabled: true,\n    },\n    type: FORM_ELEMENT_TYPES.INPUT,\n    customLabel: 'Receiver Location',\n  },\n  {\n    key: 'part_name',\n    kwargs: {\n      placeholder: 'Part Name',\n      disabled: true,\n    },\n    type: FORM_ELEMENT_TYPES.INPUT,\n    others: null,\n    customLabel: 'Part Name',\n  },\n  //parts_pm\n  // {\n  //   key: 'component_perkit',\n  //   kwargs: {\n  //     placeholder: 'Component/Kit',\n  //     type:'number',\n  //   },\n  //   type: FORM_ELEMENT_TYPES.INPUT,\n  //   others: null,\n  //   customLabel: 'Component/Kit',\n  // },\n  //weight\n  {\n    key: 'total_comp_weight_perkit',\n    kwargs: {\n      placeholder: 'Total Component Weight/Kit',\n      type: 'number',\n    },\n    type: FORM_ELEMENT_TYPES.INPUT,\n    others: null,\n    customLabel: 'Total Component Weight/Kit',\n  },\n\n  {\n    key: 'volume_pm',\n    kwargs: {\n      placeholder: 'Total Component/Month',\n      disabled: true,\n      type: 'number',\n    },\n    type: FORM_ELEMENT_TYPES.INPUT,\n    others: null,\n    customLabel: 'Total Component/Month',\n  },\n  {\n    // key: 'total_component_per_kit',\n    key: 'component_perkit',\n    kwargs: {\n      placeholder: 'Total Component/Kit',\n      type: 'number',\n    },\n    type: FORM_ELEMENT_TYPES.INPUT,\n    others: null,\n    customLabel: 'Total Component/Kit',\n  },\n\n  {\n    key: 'kit_pm',\n    kwargs: {\n      placeholder: 'Total Kit/Month',\n      type: 'number',\n      disabled: true,\n    },\n    type: FORM_ELEMENT_TYPES.INPUT,\n    others: null,\n    customLabel: 'Total Kit/Month',\n  },\n  {\n    key: 'yantra_cycle',\n    kwargs: {\n      placeholder: 'Yantra Cycle Time',\n      type: 'number',\n      disabled: true,\n    },\n    type: FORM_ELEMENT_TYPES.INPUT,\n    others: null,\n    customLabel: 'Yantra Cycle Time',\n  },\n  {\n    key: 'buffer',\n    kwargs: {\n      placeholder: 'Buffer',\n      type: 'number',\n      min: 0,\n    },\n    type: FORM_ELEMENT_TYPES.INPUT,\n    others: null,\n    customLabel: 'Buffer (%)',\n  },\n  {\n    key: 'kit_usage_ratio',\n    kwargs: {\n      placeholder: 'Kit Usage Ratio',\n      type: 'number',\n      disabled: true,\n    },\n    type: FORM_ELEMENT_TYPES.INPUT,\n    others: null,\n    customLabel: 'Kit Usage Ratio',\n  },\n  {\n    key: 'kit_based_on_usage_ratio',\n    kwargs: {\n      placeholder: 'Number of Kit based on Usage Ratio',\n      type: 'number',\n      disabled: true,\n    },\n    type: FORM_ELEMENT_TYPES.INPUT,\n    others: null,\n    customLabel: 'Number of Kit based on Usage Ratio',\n  },\n];\n","import React, {useEffect, useState, useCallback} from 'react';\nimport {Form, Col, Row, Button, Divider, Spin} from 'antd';\nimport {ArrowRightOutlined} from '@ant-design/icons';\nimport formItem from 'hocs/formItem.hoc';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {ADD_CREATE_CP_DATA, STOP_STEP_LOADING} from 'common/actions';\nimport {basicDetailCreateCPFormFields} from 'common/formFields/createCP/basicDetailsCreateCP.formFields';\n\nimport _ from 'lodash';\n\nexport const BasicDetailsCreateCPForm = ({id, onCancel, scsData, onNext, active}) => {\n  const [loading, setLoading] = useState(false);\n  const [form] = Form.useForm();\n  const dispatch = useDispatch();\n  const state = useSelector((e) => e.data.createCPData);\n\n  const submit = async (data) => {\n    setLoading(true);\n    await dispatch({type: ADD_CREATE_CP_DATA, data: {...data}});\n    setLoading(false);\n    if (active === 0) {\n      onNext();\n    }\n  };\n\n  const handleFieldsChange = useCallback(\n    (data) => {\n      if (data[0]) {\n        if (data[0].name) {\n          const currentInputField = data[0].name[0];\n          console.log(currentInputField);\n\n          if (currentInputField === 'sender_client') {\n            const temp = _.find(\n              scsData.sks,\n              (i) => `${i.sender} - ${i.receiver}` === data[0].value,\n            );\n            form.setFieldsValue({\n              volume_pm: temp.peak_volume,\n              yantra_cycle: temp.total_cycle_time,\n            });\n          }\n\n          if (form.getFieldValue('volume_pm') && form.getFieldValue('component_perkit')) {\n            form.setFieldsValue({\n              kit_pm: _.ceil(\n                form.getFieldValue('volume_pm') / form.getFieldValue('component_perkit'),\n              ),\n            });\n          } else {\n            form.setFieldsValue({\n              kit_pm: 0,\n            });\n          }\n\n          if (form.getFieldValue('yantra_cycle')) {\n            form.setFieldsValue({\n              kit_usage_ratio: _.round(30 / form.getFieldValue('yantra_cycle'), 2),\n            });\n          } else {\n            form.setFieldsValue({\n              kit_usage_ratio: 0,\n            });\n          }\n\n          if (\n            form.getFieldValue('kit_pm') &&\n            form.getFieldValue('kit_usage_ratio') &&\n            form.getFieldValue('buffer')\n          ) {\n            form.setFieldsValue({\n              kit_based_on_usage_ratio: _.ceil(\n                (form.getFieldValue('kit_pm') / form.getFieldValue('kit_usage_ratio')) *\n                  (1 + parseInt(form.getFieldValue('buffer')) / 100),\n              ),\n            });\n          } else {\n            form.setFieldsValue({\n              kit_based_on_usage_ratio: 0,\n            });\n          }\n        }\n      }\n    },\n    [form, scsData],\n  );\n\n  useEffect(() => {\n    if (active !== 0) {\n      form.submit();\n      dispatch({type: STOP_STEP_LOADING});\n    }\n  }, [active]);\n\n  return (\n    <Spin spinning={loading}>\n      <Form\n        initialValues={{...state}}\n        onFinish={submit}\n        form={form}\n        layout=\"vertical\"\n        onFieldsChange={handleFieldsChange}\n        // hideRequiredMark\n        autoComplete=\"off\">\n        <Divider orientation=\"left\">Basic Details</Divider>\n        <Row style={{justifyContent: 'left'}}>\n          {basicDetailCreateCPFormFields.slice(0, 1).map((item, idx) => (\n            <Col span={24}>\n              <div key={idx.toString()} className=\"p-2\">\n                {formItem({\n                  ...item,\n                  customLabel: 'Sender - Receiver',\n                  kwargs: {\n                    ...item.kwargs,\n                    showSearch: true,\n                    filterOption: (input, option) =>\n                      option.search.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n                  },\n                  others: {\n                    selectOptions: scsData.sks\n                      ? scsData.sks.map((i) => ({...i, new_id: `${i.sender} - ${i.receiver}`}))\n                      : [],\n                    key: 'new_id',\n                    customTitle: 'new_id',\n                  },\n                })}\n              </div>\n            </Col>\n          ))}\n          {/* {basicDetailCreateCPFormFields.slice(2, 3).map((item, idx) => (\n            <Col span={12}>\n              <div key={idx.toString()} className=\"p-2\">\n                {formItem(item)}\n              </div>\n            </Col>\n          ))} */}\n        </Row>\n        <Divider orientation=\"left\">Part Details</Divider>\n        <Row style={{justifyContent: 'left'}}>\n          {basicDetailCreateCPFormFields.slice(4, 14).map((item, idx) => (\n            <Col span={6}>\n              <div key={idx.toString()} className=\"p-2\">\n                {formItem(item)}\n              </div>\n            </Col>\n          ))}\n        </Row>\n        <Row justify=\"space-between\">\n          <div className=\"row\">\n            <Button type=\"primary\" htmlType=\"submit\" disabled>\n              Submit\n            </Button>\n            <div className=\"p-2\" />\n            <Button type=\"primary\" onClick={onCancel}>\n              Cancel\n            </Button>\n          </div>\n          <Button type=\"link\" htmlType=\"submit\">\n            <ArrowRightOutlined style={{fontSize: 30}} />\n          </Button>\n        </Row>\n      </Form>\n    </Spin>\n  );\n};\n\nexport default BasicDetailsCreateCPForm;\n"],"sourceRoot":""}